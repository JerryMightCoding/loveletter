
# 《情书》游戏单人模式NPC Player行动指南

这套指南涵盖了NPC的决策逻辑、角色优先级、目标选择和策略调整等方面。

## 一、基础决策框架

NPC在每个回合应遵循以下决策流程：

1. **抽牌阶段**：无特殊决策，直接从牌堆抽取一张牌

2. **出牌选择阶段**：根据当前手牌、游戏阶段、存活玩家数量等因素，按优先级选择要打出的牌
   - 检查是否有强制弃牌规则（如持有伯爵夫人+王子/国王时必须先弃置伯爵夫人）
   - 评估每张手牌的当前价值和潜在风险
   - 考虑手牌组合的最优策略

3. **目标选择阶段**：如果出牌需要选择目标玩家，按照优先级选择目标

4. **效果执行阶段**：执行所选卡牌的效果

## 二、角色优先级与出牌策略

### 1. 伯爵夫人（7点）- 必须弃置规则
- **触发条件**：手牌同时包含伯爵夫人与王子或国王
- **优先级**：最高（强制规则）
- **行动**：立即弃置伯爵夫人，无需选择目标

### 2. 公主（8点）- 保护策略
- **持有策略**：尽量保留，避免主动弃置或打出
- **弃置条件**：当被迫弃牌（如被王子指定）或无法避免时
- **保护手段**：优先使用侍女（4点）来保护公主

### 3. 卫兵（1点）- 信息收集与攻击
- **早期游戏**：优先使用，猜测高概率卡牌（如牧师、男爵）
- **猜测策略**：
  - 根据弃牌堆信息排除已出现的角色
  - 优先猜测点数较高的角色（如公主、国王）
  - 当手牌中有高价值卡牌时，优先猜测可能威胁自己的玩家
- **目标选择**：随机选择或优先选择当前领先的玩家

### 4. 牧师（2点）- 信息收集
- **使用时机**：希望获取关键玩家手牌信息时
- **目标选择**：
  - 优先选择当前存活玩家中看起来手牌较强的玩家
  - 或选择可能持有高价值卡牌的玩家
- **价值评估**：在游戏中期价值较高，有助于制定后续策略

### 5. 男爵（3点）- 直接攻击
- **使用条件**：手牌点数有较大概率高于其他玩家
- **目标选择**：
  - 优先选择手牌可能点数较低的玩家
  - 避免选择可能持有公主或国王的玩家
- **风险评估**：如果手牌点数较低，避免使用男爵

### 6. 侍女（4点）- 自我保护
- **使用时机**：
  - 持有公主等高价值卡牌时
  - 预计会成为其他玩家攻击目标时
  - 游戏后期需要保护自己不被淘汰时
- **价值评估**：在多人局中价值较高，可有效避免被攻击

### 7. 王子（5点）- 强制干预
- **使用时机**：
  - 希望削弱对手的高价值卡牌（如公主、国王）
  - 自己手牌较弱，希望通过重新抽牌改善
  - 针对当前领先玩家
- **目标选择**：
  - 优先选择可能持有公主的玩家（迫使对方弃置公主而淘汰）
  - 选择手牌看起来较强的玩家

### 8. 国王（6点）- 策略交换
- **使用时机**：
  - 手牌较弱，希望交换到更好的手牌
  - 对方手牌看起来较强，试图削弱对方
- **目标选择**：
  - 优先选择手牌可能较好的玩家
  - 避免选择可能持有公主的玩家（可能被迫接收公主）

## 三、游戏阶段适应性策略

### 早期阶段（前2-3回合）
- 优先使用信息收集类角色（卫兵、牧师）获取对手信息
- 保留侍女用于自我保护
- 避免过早暴露高价值卡牌

### 中期阶段（中间2-3回合）
- 利用王子强制弃牌，针对疑似持有高价值卡牌的玩家
- 注意伯爵夫人的强制弃置规则
- 根据已收集信息调整策略

### 后期阶段（最后几回合）
- 记牌并推测对手手牌（根据弃牌堆信息）
- 若持有公主，优先使用侍女保护
- 利用卫兵或男爵主动淘汰其他玩家
- 当牌库即将抽空时，优先保留点数较高的手牌

## 四、高级AI逻辑

1. **记忆系统**：
   - 记录所有已打出的卡牌
   - 跟踪每个玩家的出牌习惯和历史行为
   - 推测剩余未出现的卡牌分布

2. **风险评估**：
   - 计算每种行动的成功率和失败后果
   - 根据当前游戏状态调整风险承受度
   - 优先选择风险收益比最优的行动

3. **优先级动态调整**：
   - 根据存活玩家数量调整策略（玩家越少，攻击性越强）
   - 根据自己的爱心标记数量调整（落后时更激进，领先时更保守）
   - 考虑其他玩家的状态和可能的行动

4. **虚张声势**：
   - 模拟人类玩家的不确定性
   - 偶尔做出看似不合理但增加游戏趣味性的决策

这套NPC行动指南可以作为设计电脑AI的基础框架，通过调整各项参数和决策权重，可以实现不同难度级别和风格的电脑对手。在实际开发中，还可以根据测试结果进一步优化AI的行为模式。
        